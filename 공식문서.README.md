K3s - 경량 쿠버네티스
===============================================
[![FOSSA Status](https://app.fossa.com/api/projects/custom%2B25850%2Fgithub.com%2Fk3s-io%2Fk3s.svg?type=shield)](https://app.fossa.com/projects/custom%2B25850%2Fgithub.com%2Fk3s-io%2Fk3s?ref=badge_shield)
[![Nightly CI](https://github.com/k3s-io/k3s/actions/workflows/nightly-install.yaml/badge.svg)](https://github.com/k3s-io/k3s/actions/workflows/nightly-install.yaml)
[![Build Status](https://drone-publish.k3s.io/api/badges/k3s-io/k3s/status.svg)](https://drone-publish.k3s.io/k3s-io/k3s)
[![Integration Test Coverage](https://github.com/k3s-io/k3s/actions/workflows/integration.yaml/badge.svg)](https://github.com/k3s-io/k3s/actions/workflows/integration.yaml)
[![Unit Test Coverage](https://github.com/k3s-io/k3s/actions/workflows/unitcoverage.yaml/badge.svg)](https://github.com/k3s-io/k3s/actions/workflows/unitcoverage.yaml)
[![OpenSSF Best Practices](https://www.bestpractices.dev/projects/6835/badge)](https://www.bestpractices.dev/projects/6835)
[![OpenSSF Scorecard](https://api.scorecard.dev/projects/github.com/k3s-io/k3s/badge)](https://scorecard.dev/viewer/?uri=github.com/k3s-io/k3s)
[![Releases](https://img.shields.io/github/downloads/k3s-io/k3s/total.svg)](https://github.com/k3s-io/k3s/tags?label=Downloads)
[![CLOMonitor](https://img.shields.io/endpoint?url=https://clomonitor.io/api/projects/cncf/k3s/badge)](https://clomonitor.io/projects/cncf/k3s)

경량 쿠버네티스. 프로덕션 준비 완료, 쉬운 설치, 절반의 메모리 사용량, 100MB 미만의 단일 바이너리.

다음 환경에 최적:

* Edge 컴퓨팅
* IoT
* CI/CD 환경
* 개발 환경
* ARM 아키텍처
* k8s 임베딩
* 쿠버네티스 클러스터 전문가가 필요 없는 환경

K3s란 무엇인가?
---

K3s는 다음과 같은 변경사항을 포함한 [완전 호환(fully conformant)](https://github.com/cncf/k8s-conformance/pulls?q=is%3Apr+k3s) 프로덕션 준비 완료 쿠버네티스 배포판입니다:

1. 단일 바이너리로 패키징되어 있습니다.
1. 기본 스토리지 백엔드로 sqlite3를 지원합니다. Etcd3, MariaDB, MySQL, Postgres도 지원됩니다.
1. 쿠버네티스 및 기타 구성 요소를 단일하고 간단한 런처로 래핑합니다.
1. 경량 환경에 적합한 합리적인 기본값으로 기본적으로 보안이 강화되어 있습니다.
1. OS 의존성이 최소이거나 없습니다 (정상적인 커널과 cgroup 마운트만 필요).
1. 웹소켓 터널을 통해 컨트롤 플레인 노드에 kubelet API를 노출함으로써 워커 노드에서 포트를 노출할 필요를 없앴습니다.

K3s는 다음 기술들을 하나의 통합된 배포판으로 번들링합니다:

* [Containerd](https://containerd.io/) & [runc](https://github.com/opencontainers/runc)
* CNI를 위한 [Flannel](https://github.com/flannel-io/flannel)
* [CoreDNS](https://coredns.io/)
* [Metrics Server](https://github.com/kubernetes-sigs/metrics-server)
* Ingress를 위한 [Traefik](https://containo.us/traefik/)
* 임베디드 서비스 로드밸런서 제공자로서의 [Klipper-lb](https://github.com/k3s-io/klipper-lb)
* 네트워크 정책을 위한 [Kube-router](https://www.kube-router.io/) netpol 컨트롤러
* CRD 기반 Helm 매니페스트 배포를 가능하게 하는 [Helm-controller](https://github.com/k3s-io/helm-controller)
* etcd를 다른 데이터베이스로 교체할 수 있게 하는 데이터스토어 shim인 [Kine](https://github.com/k3s-io/kine)
* 로컬 스토리지를 사용한 볼륨 프로비저닝을 위한 [Local-path-provisioner](https://github.com/rancher/local-path-provisioner)
* iptables/nftables, ebtables, ethtool, socat 같은 [Host utilities](https://github.com/k3s-io/k3s-root)

이러한 기술들은 비활성화하거나 원하는 기술로 교체할 수 있습니다.

또한 K3s는 다음 기능을 유지함으로써 쿠버네티스 운영을 단순화합니다:

* 쿠버네티스 구성 요소의 TLS 인증서 관리
* 워커 노드와 서버 노드 간의 연결 관리
* 로컬 매니페스트가 변경될 때 실시간으로 쿠버네티스 리소스 자동 배포
* 임베디드 etcd 클러스터 관리

이름의 유래는?
--------------------

메모리 사용량 측면에서 쿠버네티스의 절반 크기인 설치판을 만들고 싶었습니다. Kubernetes는 k8s로 표기되는 10글자 단어입니다. 쿠버네티스의 절반 크기라면 K3s로 표기되는 5글자 단어가 될 것입니다. '3'은 '8'을 세로로 반으로 자른 모양이기도 합니다. K3s의 정식 풀네임이나 공식 발음은 없습니다.

포크(Fork)인가요?
---------------

아니요, 배포판(distribution)입니다. 포크는 원본에서 지속적으로 분기되는 것을 의미합니다. 이는 K3s의 목표나 실행 방식이 아닙니다. K3s는 명시적으로 쿠버네티스의 핵심 기능을 변경하지 않으려 합니다. 우리는 업스트림 쿠버네티스에 최대한 가깝게 유지하려고 노력합니다. 하지만 K3s의 사용 사례와 배포 모델에 중요한 소규모 패치 세트(1000줄 미만)를 유지합니다. 다른 구성 요소에 대한 패치도 유지합니다. 가능한 경우, 예를 들어 [containerd의 SELinux 지원](https://github.com/containerd/cri/pull/1487/commits/24209b91bf361e131478d15cfea1ab05694dc3eb)처럼 이러한 변경사항을 업스트림 프로젝트에 기여합니다. 이는 소프트웨어 배포판에서 일반적인 관행입니다.

K3s가 배포판인 이유는 바닐라 쿠버네티스를 넘어 완전히 기능하는 클러스터에 필요한 추가 구성 요소와 서비스를 패키징하기 때문입니다. Ingress, 스토리지 클래스, 네트워크 정책, 서비스 로드밸런서, 심지어 컨테이너 런타임과 같은 구성 요소의 기술에 대한 주관적인 선택입니다. 이러한 선택과 기술은 [K3s란 무엇인가?](#k3s란-무엇인가) 섹션에서 더 자세히 다룹니다.

어떻게 업스트림 쿠버네티스보다 경량이거나 작은가요?
---

K3s가 업스트림 쿠버네티스보다 경량인 두 가지 주요 방법이 있습니다:
1. 실행에 필요한 메모리 사용량이 더 적음
2. 클러스터 실행에 필요한 모든 비컨테이너화 구성 요소를 포함하는 바이너리가 더 작음

메모리 사용량은 주로 많은 구성 요소를 단일 프로세스 내에서 실행함으로써 감소됩니다. 이는 각 구성 요소마다 중복되었을 상당한 오버헤드를 제거합니다.

바이너리는 서드파티 스토리지 드라이버와 클라우드 제공자를 제거함으로써 더 작아집니다. 아래에서 더 자세히 설명합니다.

업스트림 쿠버네티스에서 무엇을 제거했나요?
---

시간이 지남에 따라 변경되었기 때문에 이는 흔한 혼란 포인트입니다. 초기 버전의 K3s는 현재 버전보다 훨씬 많이 제거했습니다. K3s는 현재 두 가지를 제거합니다:

1. In-tree 스토리지 드라이버
1. In-tree 클라우드 제공자

이 두 가지 모두 K3s에서 작동하고 업스트림이 나아가고 있는 [CSI](https://github.com/container-storage-interface/spec/blob/master/spec.md)와 [CCM](https://kubernetes.io/docs/tasks/administer-cluster/running-cloud-controller/) 형태의 out-of-tree 대안이 있습니다.

우리는 더 작은 바이너리 크기를 달성하기 위해 이것들을 제거합니다. 둘 다 쿠버네티스의 핵심 기능에 영향을 주지 않기 때문에 호환성을 유지하면서 제거할 수 있습니다. 또한 많은 K3s 사용 사례에서 사용할 수 없을 수 있는 서드파티 클라우드 또는 데이터 센터 기술/서비스에 의존합니다.

시작하기
---
- [빠른 설치](https://docs.k3s.io/quick-start)
- [아키텍처](https://docs.k3s.io/architecture)
- [FAQ](https://docs.k3s.io/faq)
- [기여하기](CONTRIBUTING.md)

커뮤니티
---
- ### Slack

[Slack](https://slack.rancher.io/)에 가입하여 K3s 개발자 및 다른 K3s 사용자와 채팅하세요. 학습하고 질문하기 좋은 곳: [#k3s](https://rancher-users.slack.com/archives/CGGQEHPPW), [#k3s-contributor](https://rancher-users.slack.com/archives/CGXR87T8B) 채널과 [CNCF Slack](https://cloud-native.slack.com)의 [#k3s](https://cloud-native.slack.com/archives/C0196ULKX8S) 채널

- ### 참여하기
[GitHub Issues](https://github.com/k3s-io/k3s/issues) - GitHub를 통해 이슈와 기능 요청을 제출하세요.

- ### 커뮤니티 미팅 및 오피스 아워
K3s 개발자 커뮤니티는 Zoom에서 채팅합니다. 누구나 환영합니다.

**[Linux Foundation iCal](https://webcal.prod.itx.linuxfoundation.org/lfx/a092M00001IkYIjQAN)을 캘린더에 추가하세요**:
- AMS/EMEA TZ 10:00 am PST - 매월 *둘째* 화요일
- EMEA/APAC TimeZone friendly - 매월 *셋째* 화요일

**미팅 노트 및 안건**: https://hackmd.io/@k3s/meet-notes/

**미팅 녹화**: [K3s 채널](https://www.youtube.com/watch?v=HRuJROA6Z3k&list=PLlBG85HKlLE9KFDqJ_K6NOpup-zVw8ANl&pp=gAQB)

웹사이트에서 전체 세부 정보를 확인할 수도 있습니다: https://k3s.io/community


다음 단계는?
---

앞으로 계획된 내용을 보려면 [로드맵](ROADMAP.md)을 확인하세요.

릴리스 주기
---

K3s는 업스트림 쿠버네티스 릴리스와 보조를 맞춥니다. 우리의 목표는 패치 릴리스를 1주일 이내에, 새로운 마이너 버전을 30일 이내에 릴리스하는 것입니다.

우리의 릴리스 버전은 릴리스되는 업스트림 쿠버네티스 버전을 반영합니다. 예를 들어, K3s 릴리스 [v1.27.4+k3s1](https://github.com/k3s-io/k3s/releases/tag/v1.27.4%2Bk3s1)은 `v1.27.4` 쿠버네티스 릴리스에 매핑됩니다. [semver](https://semver.org/)를 준수하면서 동일한 업스트림 쿠버네티스 버전을 사용하여 추가 릴리스를 만들 수 있도록 `+k3s<숫자>` 형태의 접미사를 추가합니다. 예를 들어, `v1.27.4+k3s1`에서 심각도가 높은 버그를 발견하고 즉시 수정을 릴리스해야 하는 경우 `v1.27.4+k3s2`를 릴리스합니다.

문서
-------------

전체 문서는 [공식 문서 사이트](https://docs.k3s.io)를 참조하세요.

빠른 시작 - 설치 스크립트
--------------

`install.sh` 스크립트는 K3s를 다운로드하고 systemd 또는 openrc에 서비스를 추가하는 편리한 방법을 제공합니다.

k3s를 서비스로 설치하려면 다음을 실행하세요:

```bash
curl -sfL https://get.k3s.io | sh -
```

kubeconfig 파일이 `/etc/rancher/k3s/k3s.yaml`에 작성되고 서비스가 자동으로 시작되거나 재시작됩니다.
설치 스크립트는 K3s와 `kubectl`, `crictl`, `k3s-killall.sh`, `k3s-uninstall.sh`와 같은 추가 유틸리티를 설치합니다. 예를 들어:

```bash
sudo kubectl get nodes
```

`K3S_TOKEN`은 서버의 `/var/lib/rancher/k3s/server/node-token`에 생성됩니다.
워커 노드에 설치하려면 `K3S_URL`과 함께 `K3S_TOKEN` 환경 변수를 전달하세요. 예를 들어:

```bash
curl -sfL https://get.k3s.io | K3S_URL=https://myserver:6443 K3S_TOKEN=XXX sh -
```

수동 다운로드
---------------

1. 최신 [릴리스](https://github.com/k3s-io/k3s/releases/latest)에서 `k3s`를 다운로드하세요. x86_64, armhf, arm64 및 s390x가 지원됩니다.
1. 서버를 실행하세요.

```bash
sudo k3s server &
# Kubeconfig는 /etc/rancher/k3s/k3s.yaml에 작성됩니다
sudo k3s kubectl get nodes

# 다른 노드에서 아래를 실행하세요. NODE_TOKEN은
# 서버의 /var/lib/rancher/k3s/server/node-token에서 가져옵니다
sudo k3s agent --server https://myserver:6443 --token ${NODE_TOKEN}
```

기여하기
------------

K3s에 기여하는 데 관심이 있다면 [기여 가이드](CONTRIBUTING.md)를 확인하세요.

보안
--------

K3s의 보안 문제는 [security@k3s.io](mailto:security@k3s.io)로 이메일을 보내 보고할 수 있습니다.
보안 문제에 대한 이슈는 등록하지 마세요.
